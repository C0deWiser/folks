(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{185:function(t,e,n){"use strict";n.r(e);var o={data:function(){return{search:"",searchWidth:120,table:[],loading:!0,edit:null,create:!1,form:{name:"",code:""}}},methods:{createRow:function(){var t=this;this.loading=!0,this.$http.post("/rpac/roles/",this.form).then((function(t){return t.data})).then((function(e){t.table.push(e),t.form={name:"",code:""},t.create=!1,t.loading=!1})).catch((function(t){return console.error(t)}))},deleteRow:function(t){var e=this;this.loading=!0,this.$http.post("/rpac/roles/"+t,{_method:"DELETE"}).then((function(t){return t.data})).then((function(n){var o=e.table.findIndex((function(e){return e.id===t}));e.edit=null,e.table.splice(o,1),e.loading=!1})).catch((function(t){return console.error(t)}))},saveRow:function(t){var e=this;this.loading=!0,t._method="PUT",this.$http.post("/rpac/roles/"+t.id,t).then((function(t){return t.data})).then((function(t){var n=e.table.findIndex((function(e){return e.id===t.id}));e.table[n]=t,e.edit=null,e.loading=!1})).catch((function(t){return console.error(t)}))},editRow:function(t,e){this.toggleEdit(t.id)},toggleEdit:function(t){this.edit=this.edit===t?null:t},getTableData:function(){var t=this;this.$http.get("/rpac/roles").then((function(e){t.table=e.data,t.loading=!1})).catch((function(t){return console.error(t)}))}},mounted:function(){this.getTableData()}},l=(n(90),n(1)),a=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-main",[n("el-row",[n("el-col",{attrs:{span:12}},[n("h3",{staticStyle:{margin:"0"}},[n("i",{staticClass:"el-icon-medal"}),t._v(" Роли")])]),t._v(" "),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[n("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(e){t.create=!0}}},[t._v("Создать")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"Новая роль",visible:t.create},on:{"update:visible":function(e){t.create=e}}},[n("el-form",{attrs:{model:t.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"Название"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Код"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.slug,callback:function(e){t.$set(t.form,"slug",e)},expression:"form.slug"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.create=!1}}},[t._v("Отмена")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.createRow}},[t._v("Сохранить")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"min-width":"100%"},attrs:{data:t.table}},[n("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID",width:"40"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"Название",sortable:"",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.edit===e.row.id?n("el-input",{attrs:{placeholder:e.column.label,required:""},model:{value:e.row.name,callback:function(n){t.$set(e.row,"name",n)},expression:"scope.row.name"}}):n("strong",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"code",label:"Код",sortable:"",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.edit===e.row.id?n("el-input",{attrs:{placeholder:e.column.label},model:{value:e.row.slug,callback:function(n){t.$set(e.row,"slug",n)},expression:"scope.row.slug"}}):n("span",[t._v(t._s(e.row.slug))])]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",width:t.searchWidth,align:"right"},scopedSlots:t._u([{key:"header",fn:function(e){return[t._v("\n                #\n            ")]}},{key:"default",fn:function(e){return[t.edit===e.row.id?n("el-button-group",[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-check",plain:""},on:{click:function(n){return t.saveRow(e.row)}}}),t._v(" "),n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-close",plain:""},on:{click:function(n){return t.toggleEdit(e.row.id)}}})],1):n("el-button-group",[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(n){return t.toggleEdit(e.row.id)}}}),t._v(" "),n("el-popconfirm",t._g({attrs:{confirmButtonText:"Удалить",confirmButtonType:"danger",cancelButtonText:"Отмена",icon:"el-icon-delete",iconColor:"red",title:"Удалить роль?"}},{onConfirm:function(n){t.deleteRow(e.row.id)},onCancel:function(t){return!1}}),[n("el-button",{attrs:{slot:"reference",type:"danger",size:"small",icon:"el-icon-delete"},slot:"reference"})],1)],1)]}}])})],1)],1)}),[],!1,null,"b29877c4",null);e.default=a.exports},21:function(t,e,n){var o=n(91);"string"==typeof o&&(o=[[t.i,o,""]]);var l={hmr:!0,transform:void 0,insertInto:void 0};n(16)(o,l);o.locals&&(t.exports=o.locals)},90:function(t,e,n){"use strict";var o=n(21);n.n(o).a},91:function(t,e,n){(t.exports=n(15)(!1)).push([t.i,".el-form-item__label[data-v-b29877c4] {\n  width: 120px;\n}\n.el-dialog__title[data-v-b29877c4] {\n  padding-left: 120px;\n}\n.el-dialog__footer[data-v-b29877c4] {\n  text-align: left;\n  padding-left: 140px;\n}\n.el-input__suffix[data-v-b29877c4] {\n  right: 10px;\n}\n.el-table th[data-v-b29877c4],\n.el-table td[data-v-b29877c4] {\n  vertical-align: text-top;\n}\n.tar[data-v-b29877c4] {\n  text-align: right;\n}\n.no-wrap[data-v-b29877c4] {\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 100%;\n  overflow: hidden;\n  display: inline-block;\n}",""])}}]);